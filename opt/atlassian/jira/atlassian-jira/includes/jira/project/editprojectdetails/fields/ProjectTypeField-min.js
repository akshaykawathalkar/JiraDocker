define("jira/project/edit/project-type-field",["jira/util/formatter","jquery","backbone","jira/ajs/select/single-select","jira/project/edit/change-triggered-flag","aui/inline-dialog2"],function(formatter,$,Backbone,SingleSelect,ChangeTriggeredFlag){var ProjectTypeField=Backbone.View.extend({initialize:function(){this._initSingleSelect();this.changeTriggeredFlag=new ChangeTriggeredFlag({getValue:this._getValue.bind(this),revert:this._revert.bind(this),warningDescription:formatter.I18n.getText("admin.projects.edit.project.type.warning.message"),cancelMessage:formatter.I18n.getText("admin.projects.edit.project.warning.cancel"),onCancelCallback:function(){AJS.trigger("analyticsEvent",{name:"jira.administration.projectdetails.projecttypeupdate.cancelled"})}})},events:{"change #projectTypeKey":"_optionChanged"},_getValue:function(){return $("#projectTypeKey",this.$el).val()[0]},_revert:function(originalValue){this.projectTypeSingleSelect._setDescriptorWithValue(originalValue)},_optionChanged:function(){this.changeTriggeredFlag.changeOccurred()},_initSingleSelect:function(){var projectTypeSelect=this.$el.find("#projectTypeKey");this.projectTypeSingleSelect=new SingleSelect({element:$(projectTypeSelect),revertOnInvalid:true,uneditable:($(projectTypeSelect).attr("disabled")==="disabled")})},cleanup:function(){this.changeTriggeredFlag.cleanup()}});return ProjectTypeField});